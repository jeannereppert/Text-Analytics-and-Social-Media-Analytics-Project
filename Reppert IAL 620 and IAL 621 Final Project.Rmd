---
title: "The Tip of the Iceberg"
subtitle: "Medical Misinformation and the Internet"
author: "Jeanne Reppert"
date: "December 3, 2020"
output: 
    pdf_document:
      number_sections: true

header-includes:
  - \usepackage{titling}
  - \pretitle{\begin{center}
    \includegraphics[width=4in,height=4in]{iceberg.jpg}\LARGE\\\vspace{10mm}}
  - \posttitle{\end{center}}

---

\newpage

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r echo=FALSE, message=FALSE, warning=FALSE}
#load libraries and function file
library(knitr)
library(fs)
library(tidyverse)
library(tidytext)
library(widyr)
library(tm)
library(dplyr)
library(readr)
library(ggplot2)
library(SnowballC)
library(stringr)
library(gridExtra)
library(igraph)
library(ggraph)
library(wordcloud)
library(plotly)
library(syuzhet)

#load file where functions are located
source('Mercola Functions.r')
```
## Project Abstract

text to go here after completing the project

## Introduction

As the Covid-19 pandemic has unfolded, the popularity of websites reputed for spreading misinformation has grown significantly. Some attribute this growth to the initial lack of information about the virus and the adjustments that medical professionals made to public policies as new information was revealed. Distrust has grown as public policies encroached on citizenâ€™s perceived freedoms. Anti-vaxxers, who have strong organizational structures and an existing following, harnessed public distrust to amplify the uncertainty surrounding Covid-19 related policies. Many leaders propagate conspiracy theories and use fear tactics to gain support. Key public health officials and philanthropists such as Bill and Melinda Gates have been targeted as villians.

Identifying and understanding online misinformation is essential for public health governance. In addition to identifying and flagging problematic websites, public health officials must directly refute conspiracy theories and specific scientific misinformation spread onlines. By understanding rhetorical patterns and themes utilized, a set of standards might be developed to assess websites and rate their reliability and trustworthiness.  

This study investigates the website sponsored by Joseph Mercola (Mercola.com) and its relationship to health misinformation to understand the interaction between public health issues and the polarization surrounding Covid-19 and vaccinations. Mercola.com is known as one of the largest purveyors of "alternative" health information. His website has shared information through the publication of articles since 2008. Mercola earns his living by directing his followers to an online store where vitamins and other health related products are sold. According to Stephen Barrett of Quackwatch.org (https://quackwatch.org/11ind/mercola/), Mercola had a net worth in 2017 of more than $100 million. 

Mercola's website states that he has more than a million subscribers. A typical email subscriber will recieve one daily newsletter with links to three articles. While two of those articles usually reference a short description about a supplement or health practice, the third article will often contain information that often would typically fall under the category of misinformation. Typically topics in this category would be common conspiracy theories, anti-vaccination information, and currently often debunked information pertaining to the Covid-19 virus.

## Methods

In order to investigate the tactics Mercola uses to gather followers and spread health information (and misinformation), the full corpus of archived articles published by Mercola from 2008 to 2020 were scraped from his website. Utilizing RSelenium and rvest, 9306 URL's were identified for potential scraping. Some of the URL's identifed had broken links and were eliminated. Additionally, URL's that were not associated with health articles or with little text (either recipes, exercise illustrations or videos) were also omitted. Once these URL's were eliminated, the text, date, and title were scraped from a total of 8676 articles and organized into CSV files by year. Additionally, CrowdTangle was used to gather all available posts made on Mercola's group Facebook page and a history of tweets from Mercola were gathered. The data was investigated to note patterns and trends in the texts of the website articles and how those compared to the social media content.


## Hypotheses

Websites that pass on medical misinformation have a tendancy to follow a patttern of communication. Most websites have some innocuous articles that pertain to health issues including articles about supplements, healthy eating, exercise, and health lifestyles. These articles may be atttractive to those who are mildly interested in health topic but not typically drawn to conspiracy theories that stretch the imagination more than the idea of trying a vitamin or other supplement. These types of articles may be a type of lure or "gateway drug" that draws the user in. Most websites press the viewer to share an email in order to view articles and once that email is captured, most websites will send a daily news digest that highlights additional articles. Thus over time, the user is exposed to a variety of topics including the more nefarious conspiracy theories that would be categorized as medical misinformation. One might expect then to observe in the text data, that during times when uncertainty is more prevalent due to a health crisis, these topics may skew more towards current events and during times when uncertainty in public health is less of a concern that topics will skew more towards articles about healthy lifestyles. One may also hypothesize that social media sites, for this type of misinformation, are more utilized to form connections to readers and to draw traffic to the website rather than to necessarily gain converts to the social media site itself. The real value in a tweet or a facebook post in this case is not necessarily to generate discussion or retweets but to gain clicks that will lead users to the website for the purpose of capturing their email and following up with additional emails and ultimatley product advertisements.


```{r include=FALSE, echo=FALSE, message=FALSE, warning=FALSE}
####################################################################################################
# Import individual CSV Files
##############################################################################################
#set path to loop over to get mercola files
file_paths <- fs::dir_ls("Mercola Final CSV Files")
file_paths

# For loop to load files using fs package for file directory

file_contents <- list()

for (i in seq_along(file_paths)) {
  file_contents[[i]] <- read_csv(
    file = file_paths[[i]]
  )
}

file_contents <- set_names(file_contents, file_paths)

```

## Dataset descriptions

For this study, due to the large volume of text involved with 13 years of articles, four years of articles were chosen for study. Each year represents a time frame when the United States was tasked with fighting a new virus that emerged from worldwide sources. In 2009, the H1N1 flu virus was considered to be at pandemic levels in the United States. The Ebola virus reached the shores of the United States in 2012 albeit in very small numbers, and in 2016 the Zika virus raised concerns around health professionals. In 2020, the SarsCov2 virus sparked the most serious pandemic throughout the United States since the 1918 Spanish flu pandemic.

Since Mercola's site was first launched in 2008, his 2009 article archive is relatively small with a total of 231 articles. By 2012 his collection for the year had grown to 639 years. In 2016, 793 articles were published and made available in the archived material and in 2020 (up to the beginning of November) the number of articles available was already up to 730 and is certain to grow over the next few weeks. According to the website, Mercola "fact checks" his archives which leads one to believe that he has a staff of ghost writers who are responsible for his website content.

The collection of Facebook archived posts are comprised of a csv file of 25,027 rows of data. Variables include number of page likes, number of comments, post likes, other post responses, shared links, videos, number of times videos are viewed, the post text and a score for overperformance. Most posts included range from mid-2009 to August 2019. His page has 1.78 million followers and 1.79 million likes. As of August 20, 2019, Mercola stopped posting on his Facebook page although posts by Mercola are still widely circulated on Facebook. He announced that he was leaving Facebook and includes a link to his website for more information. On his website, he encourages members to subscribe to his email, SMS messages and podcasts for daily information. Additionally, he encouraged his followers to find him on Parler. Mercola still maintains several Facebook groups in other languages. His Facebook page in Spanish has almost 1 million followers.

Twitter history for Mercola is more limited as Twitter limits the number of tweets that may be gathered to 3200. This smaller set for this reason, is comprised of tweets from July 4th, 2019 to November 13th, 2020. Variables include the tweet date, text, user description, total favorites, total followers, total friends, user location, user name, total statuses, tweet mentions, retweet mentions, tweeted urls's, url retweets and total retweets. Mercola has a total of 290.1K followers are his Twitter page. Mostly, Mercola tweets out his web page article links on a daily basis.

## Tools and Libraries Used

A variety of r packages have been used to gather and clean the data collected. RSelenium and rvest have been utilized to scrape data from the website. Massmine was used to gather tweets and CrowdTangle was used to gather data about Facebook posts. Tidyverse, tidytext, widyr, tm, dplyr, readr and stringr were all utilized to process, clean and sort the data. Snowballc was used for stemming text and ggplot2, gridExtra, igraph, ggraph, wordcloud and plotly were all utilized to produce various visualizations. Sentiment analysis was performed utilized the syuzhet package. The package fs was used to load and manage files.


```{r echo=FALSE, message=FALSE, warning=FALSE}
#############################################################################################
#Load Mercola files and use function to clean files

Mercola_2009 <- file_contents$`Mercola Final CSV Files/mercola.2009.csv`
Mercola_2009_clean <- mercola_clean_text(Mercola_2009)

Mercola_2012 <- file_contents$`Mercola Final CSV Files/mercola.2012.csv`
Mercola_2012_clean <- mercola_clean_text(Mercola_2012)

Mercola_2016 <- file_contents$`Mercola Final CSV Files/mercola.2016.csv`
Mercola_2016_clean <- mercola_clean_text(Mercola_2016)

Mercola_2020 <- file_contents$`Mercola Final CSV Files/mercola.2020.csv`
Mercola_2020_clean <- mercola_clean_text(Mercola_2020)

```

## Visualization of Mercola Website Articles: Top Words for Each Year

Given that Mercola had significantly fewer articles in 2009 and the articles in his first couple of years were less verbose, the data for 2009 is quite different in number in comparison to the other three years. This needs to be kept in mind when investigating the results. In all four years, the words vitamin, health and food all appear to figure heavily in the articles surveyed. Risk, disease and research also appear as some of the top words for all four years. In 2009, 2012, and 2020, the word vaccine appears as one of the top three words in each year with nearly 800 mentions (out of 231 articles), but more than 4500 mentions (out of 639 articles.) In 2016, when 793 articles were published, the number of mentions of vaccines drops to around 1000, but rises again in 2020, when greater than 5000 mentions of vaccines are made throughout 730 articles. In 2009 and 2012, closely associated with the occurences of the word vaccine, the word mercury also occurs. In 2009 flu and its counterpart influenza is the third most mentioned word (the year when H1N1 peaked in the U.S.) However, neither Zika or Ebola are found in the top words in the years where this virus was an issue in the U.S. perhaps because not as many individuals werre directly impacted by these viruses. In 2020, in particular, the words covid being the second most frequently mentioned word with more than 4500 mentions alone. Associated words such as sars, coronvirus, masks, pandemic, and virus also are top words. While not found in the list of top words in 2020, cancer is also a top mentioned word in 2009, 2012, and 2016.


```{r echo=FALSE, message=FALSE, warning=FALSE}
#################################################################
#use visualize_top_words function to visualize top words

m9vtw <- visualize_top_words(Mercola_2009_clean, 150, "Mercola 2009")
m12vtw <- visualize_top_words(Mercola_2012_clean, 1100, "Mercola 2012")
m16vtw <- visualize_top_words(Mercola_2016_clean, 1300, "Mercola 2016")
m20vtw <- visualize_top_words(Mercola_2020_clean, 1200, "Mercola 2020")

```


```{r show_figure1, fig.width = 8, fig.height = 11, echo=FALSE, fig.cap="Top Words for Each Year"}
grid.arrange(m9vtw, m12vtw, m16vtw, m20vtw, nrow = 2)
```


```{r echo=FALSE, message=FALSE, warning=FALSE}

top2009Words <- c("vitamin", "vaccin", "flu", "health", "food", "diseas", "risk", "blood", "cancer")

top2012Words <- c("food", "health", "vaccin", "drug", "cancer", "exercis", "bodi", "diseas", "risk")

top2016Words <- c("food", "health", "risk", "research", "bodi", "diseas", "cancer", "fat", "vitamin")

top2020Words <- c("vaccin", "covid", "health", "research", "vitamin", "diseas", "risk", "infect", "patient")

# produce graph comparing top 9 words for each dataset to their most correlated words
MercWC2009 <- visualize_word_cors(Mercola_2009_clean, top2009Words, "Mercola 2009")
MercWC2012 <- visualize_word_cors(Mercola_2012_clean, top2012Words, "Mercola 2012")
MercWC2016 <- visualize_word_cors(Mercola_2016_clean, top2016Words, "Mercola 2016")
MercWC2020 <- visualize_word_cors(Mercola_2020_clean, top2020Words, "Mercola 2020")


```


## Visualization of Mercola Website Articles: Word Correlations with Top 9 Words

### Top correlated words for Mercola Articles in 2009

Two primary topics appear to emerge when investigating word correlations for the Mercola 2009 dataset. The first topic appears to be centered around health related topics. For most of the top 9 words, correlated words are associated with major diseases, women's issues, vitamins, and food appear most frequently. Evidence of discussion regarding the H1N1 virus is also present and appears to center around the flu vaccine. Generally the correlated words to not appear to imply danger or any sort of ominous feeling.

```{r show_figure2.1, fig.width = 8, fig.height = 8, echo=FALSE, fig.cap="word correlations for top 9 words in 2009 Mercola articles"}
MercWC2009
```

### Top Correlated Words for Mercola Articles in 2012

Top correlated words in this datset appear to be more varied. Primary topics still appear to revolve around health related topics with some attention to diet, exercise and nutrition. However, in this dataset there appears to be a greater emphasis on health malfunction particularly as it pertains to cancer, diabetes, and heart issues. The words associated with cancer, drug, disease, risk and vaccine all seem to connotate a more somber discussion with associated words like death, safe, chronic, and carcinogen included in the correlated word list. Interestingly, the vaccine list of correlated words contains two references to nvic which is the vaccine study organization that is funded by Mercola. This group focuses on descriptions and arguments about the "dangers" of vaccines. Additionally, two other organizations are mentioned: the FDA and CDC.


```{r show_figure2.2, fig.width = 8, fig.height = 8, echo=FALSE, fig.cap="word correlations for top 9 words in 2012 Mercola articles"}
MercWC2012
```

### Top Correlated Words for Mercola Articles in 2016

Top correlated words in the 2016 articles again appear to move towards more light hearted subjects. Emphasis is placed on diet, nutrition, natural products, and more specific mentions of vitamins. Even categories for cancer, risk and disease appear to have less of a variety of words and the topics still seem to revolve around food intake.

```{r show_figure2.3, fig.width = 8, fig.height = 8, echo=FALSE, fig.cap="word correlations for top 9 words in 2016 Mercola articles"}
MercWC2016
```

### Top Correlated Words for Mercola Articles in 2020

Not surprisingly, 2020 has a unique list of top words in Mercola's articles and their correlated words connotate a far more serious discussion. The topics of the articles have almost fully departed from health, nutrition, and exercise topics and have switched to discussions that involve aspects of the pandemic. The correlated words for vaccine include both references to the pandemic but also to Bill Gates, the government and mandates. In the only mention of nutrition in the correlated words for vitamin, specific vitamins that have been popularly touted for immune building effects against covid are listed (vitamin D and Zinc.) More ominous words such as respiratory, severe, mortal, and infection and more commonly mentioned

```{r show_figure2.4, fig.width = 8, fig.height = 8, echo=FALSE, fig.cap="word correlations for top 9 words in 2020 Mercola articles"}
MercWC2020
```


## Visualization: Top Bigram Relationships

### Bigram Relationships for 2009 Merola Articles

The bigram relationships for Mercola's 2009 articles closely mirror the observations made regarding the most frequent words and correlated words. 

```{r echo=FALSE, message=FALSE, warning=FALSE}

# apply count_bigrams function to Mercola 2009 dataset
  m09.viz.bigrams <- count_bigrams(Mercola_2009)

# filter out rare combinations, as well as digits and produce graph and produce visualization
#using visualize_bigrams function
m09vb <- m09.viz.bigrams %>%
  filter(n > 3,
         !str_detect(word1, "\\d"),
         !str_detect(word2, "\\d"))
#produce visualization using visualize_bigrams function
m09vb <- visualize_bigrams(m09vb, "Mercola Bigrams 2009")

# apply count_bigrams function to Mercola 2012 dataset
  m12.viz.bigrams <- count_bigrams(Mercola_2012)

# filter out rare combinations, as well as digits and produce graph
m12vb <- m12.viz.bigrams %>%
  filter(n > 20,
         !str_detect(word1, "\\d"),
         !str_detect(word2, "\\d"))
#produce visualization using visualize_bigrams function
m12vb <- visualize_bigrams(m12vb, "Mercola Bigrams 2012")

```


```{r show_figure3.1, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}
m09vb
```

### Bigram Relationships for 2012 Mercola Articles


```{r show_figure3.2, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}
m12vb
```



```{r echo=FALSE, message=FALSE, warning=FALSE}

# apply count_bigrams function to Mercola 2016 dataset
  m16.viz.bigrams <- count_bigrams(Mercola_2016)

# filter out rare combinations, as well as digits and produce graph and produce visualization
#using visualize_bigrams function
m16vb <- m16.viz.bigrams %>%
  filter(n > 30,
         !str_detect(word1, "\\d"),
         !str_detect(word2, "\\d"))

#produce visualization using visualize_bigrams function
m16vb <- visualize_bigrams(m16vb, "Mercola Bigrams 2016")

# apply count_bigrams function to Mercola 2020 dataset
  m20.viz.bigrams <- count_bigrams(Mercola_2020)

# filter out rare combinations, as well as digits and produce graph and produce visualization
#using visualize_bigrams function
m20vb <- m20.viz.bigrams %>%
  filter(n > 30,
         !str_detect(word1, "\\d"),
         !str_detect(word2, "\\d"))

#produce visualization using visualize_bigrams function
m20vb <- visualize_bigrams(m20vb, "Mercola Bigrams 2020")

```

### Bigram Relationships for 2016 Mercola Articles

```{r show_figure3.3, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}
m16vb
```

### Bigram Relationships for 2016 Mercola Articles

```{r show_figure3.4, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}
m20vb
```


## Visualization: Word Cloud - Title Sentiment Analysis

Another way to understand the content of the Mercola corpus is to investigate the titles of articles and their conveyed sentiment. This is of particular interest because these titles are what are displayed on social media posts and would be the attention grabbing material in daily emails and SMS texts.

### Title Sentiment Analysis Word Cloud for 2009 Mercola Articles

```{r show_figure4.1, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}

#use word cloud function to display Mercola Title Sentiment word cloud for 2009
wcMerc2009 <- word_cloud_Merc(Mercola_2009, "Mercola Title Sentiment - 2009")
wcMerc2009
```

### Title Sentiment Analysis Word Cloud for 2012 Mercola Articles

```{r show_figure4.2, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}

#use word cloud function to display Mercola Title Sentiment word cloud for 2012
wcMerc2012 <- word_cloud_Merc(Mercola_2012, "Mercola Title Sentiment - 2012")
wcMerc2012
```

### Title Sentiment Analysis Word Cloud for 2016 Mercola Articles

```{r show_figure4.3, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}

#use word cloud function to display Mercola Title Sentiment word cloud for 2016
wcMerc2016 <- word_cloud_Merc(Mercola_2016, "Mercola Title Sentiment - 2016")
wcMerc2016
```

### Title Sentiment Analysis Word Cloud for 2020 Mercola Articles


```{r show_figure4.4, fig.width = 8, fig.height = 6, echo=FALSE, warning=FALSE}

#use word cloud function to display Mercola Title Sentiment word cloud for 2020
wcMerc2020 <- word_cloud_Merc(Mercola_2020, "Mercola Title Sentiment - 2020")
wcMerc2020
```

## Social Media Material - Facebook visualizations here

Why these 5? What did the comparison help understand about problem/issue? Understand about domains/locations/genres?

Sentiment of comments versus topics of articles
Page views compared to topics or authors
Activity within certain time periods compared to topics/authors/sentimeents
Compare genres/site categories


```{r echo=FALSE, message=FALSE, warning=FALSE}

# read in csv file as tibble/data frame
Mercola_FB <- read.csv(file='Mercola FB Posts.csv', stringsAsFactors=FALSE)

# make tibble/data.frame
Mercola_FB <- as_tibble(Mercola_FB)
head(Mercola_FB)

Mercola_FB <- Mercola_FB %>% 
  select(Created, Type, Likes, Comments, Shares, Post.Views, Total.Views, Total.Views.For.All.Crossposts, URL, Message, Link, Final.Link, Link.Text, Image.Text, Description, Overperforming.Score) %>%
  rename(Date = Created, Post_Type = Type, Post_Views = Post.Views, Total_Views = Total.Views.For.All.Crossposts, Final_Link = Final.Link, Link_Text = Link.Text, Image_Text= Image.Text, OP_Score = Overperforming.Score )



```

```{r}
#head(Mercola_FB)
```



## Twitter Data


```{r echo=FALSE, message=FALSE, warning=FALSE}
library(quanteda)
library(readtext)

#############################################
# read in CSV and convert to quanteda corpus
#############################################

# read in csv file of tweets
Mercola_tweets.data <- readtext('mercolatweets.csv', text_field='text')

# convert to quanteda corpus structure
Mercola_tweets.corpus <- corpus(Mercola_tweets.data)

# convert to document feature matrix
Mercola_tweet.dfm <- dfm(Mercola_tweets.corpus, remove_punct = TRUE)

#######################
# top hashtags
#######################

# extract the most frequently used hashtags
tag.dfm <- dfm_select(Mercola_tweet.dfm, pattern = ("#*"))
Mercola_toptag <- names(topfeatures(tag.dfm, 200))

#################################
# graph co-occurance of hashtags
#################################

# construct feature co-occurance matrix of hashtags
tag.fcm <- fcm(tag.dfm)

# create graph of co-occurance relationships for tags
Mercola_topgat.fcm <- fcm_select(tag.fcm, pattern = Mercola_toptag)
Mercola_hashtags_plot <- textplot_network(Mercola_topgat.fcm, min_freq = 0.1, edge_alpha = 0.8, edge_size = 5)

########################
# explore top usernames
########################

# extract the most frequently mentioned usernames
Mercola_user.dfm <- dfm_select(Mercola_tweet.dfm, pattern = "@*")
Mercola_topuser <- names(topfeatures(Mercola_user.dfm, 150))

##########################################
# graph co-occurance of username mentions
##########################################

# construct feature co-occurance matrix of usernames
Mercola_user.fcm <- fcm(Mercola_user.dfm)

# create a graph of co-occurance relationships for mentioned usernames
Mercola_user.fcm <- fcm_select(Mercola_user.fcm, pattern = Mercola_topuser)
Mercola_user_plot <- textplot_network(Mercola_user.fcm, min_freq = 0.1, edge_color = "orange", edge_alpha = 0.8, edge_size = 5)
```

```{r show_figure5.1, fig.width = 9, fig.height = 10, echo=FALSE, warning=FALSE}
Mercola_hashtags_plot
```

```{r show_figure5.2, fig.width = 10, fig.height = 11, echo=FALSE, warning=FALSE}
Mercola_user_plot
```

## Limitations/Next Steps

Vast number of sites with ongoing publishing. Some sites are much larger and more widely varied. Questions about validity of comparisons in this case. 2 sites dominate most of the infomration but how much do smaller websites contribute to misinformation. Intersection between political sites and other issues and this one. What role do these sites contribute to the corpus of misinformation? Expanding criterion for selecting sites would help understanding the issue.

## Conclusion

Concluding Statement
What were the big picture takeaways from your project?
What have you learned?

## References

References/libraries/Endnotes




